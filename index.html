<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ishwar Order System</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    .header {
      background-color: #4CAF50;
      color: white;
      text-align: center;
      padding: 10px 0;
      font-size: 20px;
    }

    .search-bar {
      display: flex;
      justify-content: center;
      padding: 10px;
    }

    .search-bar input {
      width: 80%;
      padding: 8px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    .item-list {
      padding: 10px;
    }

    .item {
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 10px;
      margin: 10px 0;
      cursor: pointer;
    }

    .item h4 {
      margin: 0;
    }

    .item p {
      margin: 5px 0;
      font-size: 14px;
    }

    .cart-button {
      position: fixed;
      bottom: 10px;
      right: 10px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 1;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.4);
    }

    .modal-content {
      background-color: #fefefe;
      margin: 15% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
      max-width: 400px;
      border-radius: 8px;
    }

    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }

    .close:hover,
    .close:focus {
      color: black;
      text-decoration: none;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    table th, table td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
    }

    table th {
      background-color: #4CAF50;
      color: white;
    }
  </style>
</head>
<body>
  <div class="header">Ishwar Order System</div>
  <div class="search-bar">
    <input type="text" id="search" placeholder="Search items...">
  </div>
  <div class="item-list" id="item-list"></div>

  <button class="cart-button" id="view-cart">ðŸ›’</button>

  <!-- Modal for Order Details -->
  <div id="order-modal" class="modal">
    <div class="modal-content">
      <span class="close" id="close-modal">&times;</span>
      <div id="item-details"></div>
      <label for="order-qty">Order Quantity:</label>
      <input type="number" id="order-qty" placeholder="Enter quantity" style="width: 100%; padding: 8px; margin: 10px 0;">

      <label for="toggle-unit">Select Unit:</label>
      <select id="toggle-unit" style="width: 100%; padding: 8px; margin: 10px 0;">
        <option value="boxes">Boxes</option>
        <option value="cases">Cases</option>
      </select>

      <label for="special-rate">Special Rate (if any):</label>
      <input type="number" id="special-rate" placeholder="Enter rate" style="width: 100%; padding: 8px; margin: 10px 0;">

      <button id="add-to-cart" style="background-color: #4CAF50; color: white; width: 100%; padding: 10px; border: none; border-radius: 4px; cursor: pointer;">Add to Cart</button>
    </div>
  </div>

  <!-- Cart Summary -->
  <div id="cart-summary" class="modal">
    <div class="modal-content">
      <span class="close" id="close-cart">&times;</span>
      <h3>Order Summary</h3>
      <table id="cart-table">
        <thead>
          <tr>
            <th>Product Name</th>
            <th>Pack</th>
            <th>Shipper</th>
            <th>PTS</th>
            <th>Order Qty</th>
            <th>Special Rate</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <script>
    let cart = [];

    // Fetch data from data.json
    fetch('data.json')
      .then(response => response.json())
      .then(data => {
        displayItems(data);
      });

    // Display items
    function displayItems(items) {
      const itemList = document.getElementById('item-list');
      itemList.innerHTML = '';

      items.forEach(item => {
        const itemDiv = document.createElement('div');
        itemDiv.classList.add('item');
        itemDiv.dataset.id = item.Sl;

        itemDiv.innerHTML = `
          <h4>${item["Product Name"]}</h4>
          <p>${item.Pack} | ${item.Box} | ${item.Shipper}</p>
          <p>MRP: ${item.MRP} | PTS: ${item.PTS}</p>
        `;

        itemDiv.addEventListener('click', () => openOrderModal(item));

        itemList.appendChild(itemDiv);
      });
    }

    // Open order modal
    function openOrderModal(item) {
      const modal = document.getElementById('order-modal');
      const itemDetails = document.getElementById('item-details');
      const orderQty = document.getElementById('order-qty');
      const specialRate = document.getElementById('special-rate');

      itemDetails.innerHTML = `
        <h4>${item["Product Name"]}</h4>
        <p>${item.Pack} | ${item.Box} | ${item.Shipper}</p>
        <p>MRP: ${item.MRP} | PTS: ${item.PTS}</p>
      `;

      orderQty.value = '';
      specialRate.value = '';

      document.getElementById('add-to-cart').onclick = () => {
        addToCart(item, orderQty.value, document.getElementById('toggle-unit').value, specialRate.value);
      };

      modal.style.display = 'block';
    }

    // Add to cart
    function addToCart(item, quantity, unit, specialRate) {
      cart.push({
        ...item,
        quantity,
        unit,
        specialRate
      });

      closeModal();
    }

    // Close modal
    function closeModal() {
      document.getElementById('order-modal').style.display = 'none';
    }

    document.getElementById('close-modal').onclick = closeModal;

    // View cart
    document.getElementById('view-cart').onclick = () => {
      const cartModal = document.getElementById('cart-summary');
      const cartTableBody = document.getElementById('cart-table').querySelector('tbody');

      cartTableBody.innerHTML = '';

      cart.forEach(item => {
        const row = document.createElement('tr');

        row.innerHTML = `
          <td>${item["Product Name"]}</td>
          <td>${item.Pack}</td>
          <td>${item.Shipper}</td>
          <td>${item.PTS}</td>
          <td>${item.quantity} (${item.unit})</td>
          <td>${item.specialRate || '-'}</td>
        `;

        cartTableBody.appendChild(row);
      });

      cartModal.style.display = 'block';
    };

    document.getElementById('close-cart').onclick = () => {
      document.getElementById('cart-summary').style.display = 'none';
    };
  </script>
</body>
</html>
